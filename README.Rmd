---
output: github_document
---

<!-- README.md is generated from README.Rmd. Please edit that file -->

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  message=FALSE,
  warning=FALSE,
  eval = nzchar(Sys.getenv("IS_DEVELOPMENT_MACHINE"))
)
```


# zoltr - An R client for the Zoltar data repository API

## Overview

This package contains functions for working with the [Zoltar](https://www.zoltardata.com/) forecast repository's API,
including projects, models, forecasts, and scores. Read more at the [zoltr pkgdown site](http://reichlab.io/zoltr/).


## Installation

You can install the released version of zoltr from [CRAN](https://CRAN.R-project.org) with:

``` r
install.packages("zoltr")
```

And the development version from [GitHub](https://github.com/) with:

``` r
# install.packages("devtools")
devtools::install_github("reichlab/zoltr")
```


## Usage

Read more at the [zoltr pkgdown site](http://reichlab.io/zoltr/), but briefly you use the `new_connection()` function to
create a connection to [Zoltar](https://www.zoltardata.com/) and then pass that connection along with the _ID_ of the
resource of interest (e.g., a project, model, or forecast) to this package's various functions like `projects()`,
`project_info()`, or `scores()`.

```{r example}
library(zoltr)
conn <- new_connection()
conn

the_projects <- projects(conn)
project_id <- the_projects[1,]$id
the_project_info <- project_info(conn, project_id)
names(the_project_info)
the_project_info$name
```


## Forecast data format

The native forecast data format supported by the Zoltar API is a `list`. See 
[this page](https://www.zoltardata.com/docs#forecasts) for format details. You can find an example at
tests/testthat/20101024-ReichLab_sarima_seasonal_difference_TRUE-20101108.cdc.csv-small.json . By convention this
package referred to this as `forecast_data`. Conversion functions are provided to convert between this format (which is 
required by `upload_forecast()` and `forecast_data()`) and CDC CSV format (currently our only `data.frame`-compatible
format):

- `cdc_data_frame_from_forecast_data()`: Converts forecast data from Zoltar's native `list` format to a CDC-specific `data.frame`. Suitable
  for saving to csv file.
- `forecast_data_from_cdc_csv_file()`: Loads a CDC-specific CSV file into Zoltar's native `list` format. Suitable for passing to
  `upload_forecast()`.

Details about the CDC CSV format can be found at 
[flu_challenge_2016-17_update.docx](https://predict.cdc.gov/api/v1/attachments/flusight/flu_challenge_2016-17_update.docx).
